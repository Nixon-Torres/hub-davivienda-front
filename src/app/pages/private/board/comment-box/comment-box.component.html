<header *ngIf="showHeader" >
    <button class="close-btn" (click)="hideComments()">
        <i class="material-icons">close</i>
    </button>
    <!-- Rounded switch -->
    <label class="switch">
        <input type="checkbox" [(ngModel)]="switchState" (change)="switchToggled()">
        <span class="slider round"></span>
    </label>
    <h1>Comentarios</h1>
</header>

<section>
    <div class="add-action" *ngIf="!flagAdd">
        <p>
            <button (click)="displayCommentForm()">
                <i class="material-icons">add</i>
            </button>
            <span>Nuevo comentario</span>
        </p>
    </div>
    <mat-card id="{{ comment.id }}" class="comment" *ngFor="let comment of list.comments; let idx = index">
        <mat-card-header>
            <div mat-card-avatar>
                <div class="avatar"></div>
                <!-- <img src="../../../../../assets/images/user/images.png"> -->
            </div>

            <mat-card-title>{{ comment.user?.name }}</mat-card-title>
            <mat-card-subtitle>{{ comment.user?.charge }}</mat-card-subtitle>
            <button class="comment-close" (click)="deleteComment(comment.id)" *ngIf="!comment.resolved">
                <span class="icon icon-trash-alt"></span>
            </button>
        </mat-card-header>
        <mat-card-content>
            <p>{{ comment.text }}</p>
            <div class="actions">
                <button *ngIf="showResolveButton(idx)" (click)="resolveComment(comment)" mat-stroked-button class="btn-resolve" [disabled]="comment.resolved">
                    {{comment.resolved ? 'Resuelto': 'Resolver'}}
                </button>
                <div class="resolved-icon">
                    <button class="btn-answer">
                        Responder...
                    </button>
                    <i class="far fa-check-circle check"></i>
                    <i class="fas fa-eye-slash eye"></i>
                </div>
            </div>
        <!-- Reply comment -->
        <mat-card-content class="form reply_comment">
            <mat-card-header>
                <div mat-card-avatar>
                    <div class="avatar"></div>
                </div>
    
                <mat-card-title>{{ comment.user?.name }}</mat-card-title>
                <mat-card-subtitle>{{ comment.user?.charge }}</mat-card-subtitle>
                <button class="comment-close" (click)="deleteComment(comment.id)" *ngIf="!comment.resolved">
                    <span class="icon icon-trash-alt"></span>
                </button>
            </mat-card-header>
            <textarea placeholder="Escriba aquí..." (click)="expandArea()" [ngClass]="expandStyle"></textarea>
            <button type="button" name="button" class="send-btn" (click)="sendComment()">
                <i class="material-icons">arrow_forward</i>
            </button>
        </mat-card-content>
        </mat-card-content>
    </mat-card>

    <mat-card class="comment-form" *ngIf="flagAdd">
        <mat-card-header>
            <div mat-card-avatar>
                <div class="avatar"></div>
                <!-- <img src="../../../../../assets/images/user/images.png"> -->
            </div>
            <mat-card-title>{{ user?.name }}</mat-card-title>
            <mat-card-subtitle>{{ user?.charge }}</mat-card-subtitle>
            <button class="comment-close" (click)="hideCommentForm()">
                <span class="icon icon-times"></span>
            </button>
        </mat-card-header>
        <mat-card-content class="form">
            <textarea placeholder="Escriba aquí..." [(ngModel)]="comment.text" (click)="expandArea()" [ngClass]="expandStyle"></textarea>
            <button type="button" name="button" class="send-btn" (click)="sendComment()">
                <i class="material-icons">arrow_forward</i>
            </button>
        </mat-card-content>
    </mat-card>
</section>

<!-- <footer>
    <button type="button" name="button" mat-stroked-button>Enviar comentarios</button>
</footer>
 -->
